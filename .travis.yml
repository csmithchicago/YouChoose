sudo: required

dist: xenial

language: python

python:
 - '3.7'

cache:
  pip: true
  directories:
    - "$HOME/.cache/pre-commit"

install:
 - pip install -r requirements.txt
 - pre-commit install

script:
- pre-commit run --all-files
- coverage run --branch --source . -m pytest

after_success:
  - coverage report
  - coverage xml
  - python-codacy-coverage -r coverage.xml
  - coveralls
